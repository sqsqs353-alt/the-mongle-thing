// NEW ROBUST LOADER
window.initSession = async () => {
    // ... (keep the username and IP logic the same) ...

    try {
        // Change 'main' to 'master' if your branch name is different
        const repoPath = 'sqsqs353-alt/the-mongle-thing';
        const res = await fetch(`https://api.github.com/repos/${repoPath}/contents/`);
        
        if (!res.ok) throw new Error("Repo not found or private");

        const data = await res.json();
        
        // This looks for .html files in the main folder
        gameData = data.filter(f => f.name.endsWith('.html') && f.name !== 'index.html');

        // IF THE GAMES ARE IN A FOLDER CALLED "games", UNCOMMENT THE LINE BELOW:
        // const folderRes = await fetch(`https://api.github.com/repos/${repoPath}/contents/games`);
        // const folderData = await folderRes.json();
        // gameData = [...gameData, ...folderData.filter(f => f.name.endsWith('.html'))];

        if (gameData.length === 0) {
            console.warn("No .html files found in the repository.");
        }

        renderGrid();
    } catch(e) { 
        console.error("OVERSEER ERROR: Could not reach GitHub.", e);
        document.getElementById('grid').innerHTML = "<p style='color:red'>FILE_FETCH_ERROR: Check Repo Privacy</p>";
    }
    
    if(isAdmin) startOverseer();
};
